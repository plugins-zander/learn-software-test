# 程序复杂度及度量方法

## 程序复杂度及度量方法

​	在实际的软件开发过程中，人们发现程序的复杂度不仅影响软件的可维护性、可测试性及可靠性等，而且与软件中故障的数量、软件的开发成本及软件的效率有关。

### 流图的概念

​	流图又称程序图，实际上可以看作是一种简化了的程序流程图。在流图中，只关注程序的流程，不关心各个处理框的细节，因此，原来程序流程图中的各个处理框（包括语句框、判断框、输入/输出框等）都被简化为结点，一般用圆圈表示，而原来程序流程图中的带有箭头的控制流变成了程序图中的有向边。

​	结构化程序设计中的几种基本结构的流图。如图3-2所示。

![1568862923535](https://img1.zlogs.net/20/20200117223045.png)

​	简化后的流图只有两种图形符号：结点和控制流线。结点用带标号的圆圈表示，可以代表一个或多个语句、一个处理框或一个判断框。控制流线用带箭头的弧线表示，代表程序中控制流。

​	从图论的观点来看，流图是一个可表示为G=<N,E>的有向图。其中，N表示图中的结点，而E表示图中的有向边。

​	流图可以通过简化程序流程图得到，也可以由PAD图或其他详细设计表达工具变换得到。



图3-3是典型的程序流程图转换为相对应的流图。对图3-3中的（a）所示的程序流程图进行简化，得到图3-3（b）所示的流图。

![](https://img1.zlogs.net/20/20200117223046.png)

图3-3程序流程图及对应的流图（a）程序流程图；（b）流图

<br/><br/>

### 环形复杂度

​	环形复杂度又称为圈复杂度，是一种为程序逻辑复杂度提供定量尺度的软件度量。它可以提供程序基本集的独立路径数量和确保所有语句至少执行一次的过程。常用于基本路径测试法。

​	环形复杂度的度量方法又称为McCabe方法。一个强连通流图中线性无关的有向环的个数就是该程序的环形复杂度。而强连通图，是指从图中任意一个结点出发都能到达图中其他结点的有向图。

​	在图论中可以通过以下公式来计算有向图中线性无关的有向环的个数。

$	V（G）=m-n+p	①	$	

其中：V（G）表示有向图G中的线性无关的环数；

​	m表示有向图G中有向边的个数；

​	n表示有向图中的结点数；

​	p表示有向图G中可分离出的独立连通区域数，为常数1。



​	流图虽为连通图，但不是强连通图，可以在流图中增加一条出口点到入口点的虚弧线，此时，流图就变成了一个强连通图。如图3-4所示，在图3-3（b）流图添加虚弧后得到的强连通图。

![](https://img1.zlogs.net/20/20200117223047.png)

图3-4将图3-3（b）变换后的强连通图

<br/>

采用上面的公式①计算它的环形复杂度为:

$V（G）=13-10+1=4  $	      （加一是考虑虚弧）       		

图3-4强连通图的复杂度是4，因此图3-4中有4个线性独立环路。此时删除从结点E到结点S的虚弧，则这4个环路就是结点S到结点E的线性独立路径。

4条线性独立路径：	

Path1:  S→a→b→g→E	

Path2:  S→a→b→g→h→E	

Path3:  S→a→b→c→d→f→b→g→E	

Path4:  S→a→b→c→e→f→b→g→E

<br/>

除了采用上面的公式①可以计算环形复杂度外，还可以用其他的公式计算出流图中的环形复杂度。

V（G）=强连通的流图在平面上围成的区域数​		②

图3-4中，流图中围成的区域有（b,c,d,f,b），（c,d,f,e,c），（g,h,E,g）和（S,a,b,g,E,S），因此公式②计算得到的流图环形复杂度为4。

<br/>

V（G）=判定结点数+1​		(判定节点为出来弧>1)③

在图3-4中，判定结点分别为b，c和g，根据公式③可得环形复杂度为：3+1=4。

<br/><br/><br/>



## 图矩阵

​	图矩阵是流图的邻接矩阵的表示形式，其阶数等于流图的结点数，矩阵的每列与每行都对应于标识的某一结点，矩阵元素对应于结点之间的存在的边；有边取值为1，否则为0或不填。

​	如图3-5和图3-6所示，一个简单流图及对应的邻接矩阵：

![](https://img1.zlogs.net/20/20200117223048.png)

行相加判断是否是判定结点

<br/>

# 