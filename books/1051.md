# 6、改进的判定/条件覆盖

​	一个基于改进的条件/判定覆盖概念的充分性准则又称为MC/DC覆盖，它可以对所有条件和判定进行完全且合理的测试。

​	满足MC/DC覆盖的测试用例要求如下：

- （1）每一个基本块都被覆盖了。
- （2）每一个简单条件都取过真值和假值。
- （3）每一个判定都得出过所有可能的输出结果。
- （4）每一个简单条件对表达式的输出结果的影响是独立的。

------



| 测试用例号 | 输入 | 输入 | 输入 | 表达式值 | 注释                  |
| ---------- | ---- | ---- | ---- | -------- | --------------------- |
|            | A    | B    | C    |          |                       |
| 1          | T    | T    | T    | T        | 固定A、B， A、B为T    |
| 2          | T    | T    | F    | T        | 固定A、B， A、B为T    |
| 3          | T    | F    | T    | T        | 固定A、B， A为T、B为F |
| 4          | T    | F    | F    | F        | 固定A、B， A为T、B为F |
| 5          | F    | T    | T    | T        | 固定A、B， A为F、B为T |
| 6          | F    | T    | F    | F        | 固定A、B， A为F、B为T |
| 7          | F    | F    | T    | T        | 固定A、B， A、B为F    |
| 8          | F    | F    | F    | F        | 固定A、B， A、B为F    |
| 9          | T    | T    | T    | T        | 固定A、C， A、C为T    |
| 10         | T    | F    | T    | T        | 固定A、C， A、C为T    |
| 11         | T    | T    | F    | T        | 固定A、C， A为T、C为F |
| 12         | T    | F    | F    | F        | 固定A、C， A为T、C为F |
| 13         | F    | T    | T    | T        | 固定A、C， A为F、C为T |
| 14         | F    | F    | T    | T        | 固定A、C， A为F、C为T |
| 15         | F    | T    | F    | F        | 固定A、C， A、C为F    |
| 16         | F    | F    | F    | F        | 固定A、C， A、C为F    |
| 17         | T    | T    | T    | T        | 固定B、C， B、C为T    |
| 18         | F    | T    | T    | T        | 固定B、C， B、C为T    |
| 19         | T    | T    | F    | T        | 固定B、C， B为T、C为F |
| 20         | F    | T    | F    | F        | 固定B、C， B为T、C为F |
| 21         | T    | F    | T    | T        | 固定B、C， B为F、C为T |
| 22         | F    | F    | T    | T        | 固定B、C， B为F、C为T |
| 23         | T    | F    | F    | F        | 固定B、C， B、C为F    |
| 24         | F    | F    | F    | F        | 固定B、C， B、C为F    |



从表3-5中可以发现，其中**有很多是行是重复的**。针对三个条件中的每一个条件，选择其中两个测试用例来说明该简单条件对表达式结果的独立影响：对C，选择测试用例（3，4）；对B，选择测试用例（11，12）；对A，选择测试用例（19，20）。如表3-6所示，共有6个测试用例。

表3-6表达式(A and B) or C 的充分测试集

| 测试用例号 | 输入 | 输入 | 输入 | 表达式值 | 对表达值有影响的输入 |
| ---------- | ---- | ---- | ---- | -------- | -------------------- |
|            | A    | B    | C    |          |                      |
| 1  [3]     | T    | F    | T    | T        | C                    |
| 2  [4]     | T    | F    | F    | F        | C                    |
| 3  [11]    | T    | T    | F    | T        | B                    |
| 4  [12]    | T    | F    | F    | F        | B                    |
| 5  [19]    | T    | T    | F    | T        | A                    |
| 6  [20]    | F    | T    | F    | F        | A                    |

将表3-6再进行简化得表3-7，得其最小测试集如表3-7。可知：复合条件中的每一个简单条件都独立地影响复合条件的结果。程序中每个复合条件都必须测试到。并且此覆盖比组合条件所需的测试用例数要少。对表达式(A and B) or C，在条件组合覆盖下最多需要8个测试用例，而满足MC/DC覆盖只需要4个测试用例即可。



表3-7表达式(A and B) or C 的最小充分测试集

| 测试用例号 | 输入 | 输入 | 输入 | 表达式值 | 对表达值有影响的输入 |
| ---------- | ---- | ---- | ---- | -------- | -------------------- |
|            | A    | B    | C    |          |                      |
| 1          | T    | F    | T    | T        |                      |
| 2          | T    | F    | F    | F        | 测试用例1、2覆盖C，  |
| 3          | T    | T    | F    | T        | 测试用例2、3覆盖B，  |
| 4          | F    | T    | F    | F        | 测试用例3、4覆盖A    |

例3-7 对于testexample1函数实现MC/DC覆盖设计测试用例如表3-8、表3-9、表3-10所示。

表3-8 testexample1函数表达式(x>1)&&(y==0)最小充分测试用例集

| 测试用例号 | 输入 | 表达式值 | 对表达值有影响的输入 |                                      |
| ---------- | ---- | -------- | -------------------- | ------------------------------------ |
| x          | y    |          |                      |                                      |
| 1          | 2    | 0        | T                    | 测试用例1、2覆盖y，测试用例2、3覆盖x |
| 2          | 2    | 1        | F                    |                                      |
| 3          | 1    | 0        | F                    |                                      |

表3-9 testexample1函数表达式``(x==2)||(z>1)``最小充分测试用例集

| 测试用例号 | 输入 | 输入 | 表达式值 | 对表达值有影响的输入 |
| ---------- | ---- | ---- | -------- | -------------------- |
|            | x    | z    |          |                      |
| 5          | 2    | 0    | T        |                      |
| 6          | 1    | 2    | T        | 测试用例5、6覆盖x，  |
| 7          | 1    | 0    | F        | 测试用例6、7覆盖z    |

表3-10 testexample1函数的MC/DC覆盖设计测试用例

| ID      | 输入数据 | 输入数据 | 输入数据 | 返回值 | 对表达式有影响的输入 |
| ------- | -------- | -------- | -------- | ------ | -------------------- |
|         | x        | y        | z        | z      |                      |
| TE1-010 | 2        | 0        | 1        | 3      |                      |
| TE1-011 | 2        | 1        | 1        | 2      | TE-010、 TE-011覆盖y |
| TE1-012 | 1        | 0        | 2        | 2      | TE-011、TE-012覆盖x  |
| TE1-013 | 1        | 0        | 0        | 0      | TE-012、 TE-013覆盖z |

