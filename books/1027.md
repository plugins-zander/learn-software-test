# 自动化测试

## 软件测试自动化的基本概念

### 测试自动化的定义

软件测试自动化是通过软件测试工具，按照测试人员预定的计划和测试用例对软件产品进行自动测试。软件测试自动化是把以人为驱动的测试行为转化为机器执行的一种过程。通常，在设计了测试用例并通过评审之后，由测试人员根据测试用例中描述的规程一步步执行测试，得到实际结果与期望结果的比较。



### 测试自动化的意义

（1）测试自动化可以节约时间。（2）测试自动化会更可靠，提高了精确度和准确度。（3）测试自动化有助于立即测试。（4）测试自动化可以减轻测试工程师的测试工作量，使他们能把注意力放在更有创造性的任务上。（5）测试自动化可以更好地利用全球资源。（6）有些测试必须进行自动化测试。





### 自动化测试术语

（1）测试用例有两类测试用例：一类是自动化的测试用例，另一类是手工的测试用例。

（2）测试包测试包：是一组测试用例被组合并与一组场景关联。

（3）测试自动化框架：自动化测试框架是应用于自动化测试所用的框架，由一个或多个自动化测试基础模块、自动化测试管理模块、自动化测试统计模块等组成的工具集合。如图7-1所示。



### 自动化测试所需技能

可分为三种类型：

（1）记录与回放：测试工作人员只需录制键盘字符或鼠标点击的行动序列，并在以后按照录制的顺序回放所记录的脚本就可重显操作过程的测试。

（2）数据驱动：这种方法关注不同的输入和输出条件。有助于开发生成输入条件集和对应预期输出的测试脚本。

（3）行动驱动：应用程序中出现的所有行动都会以为自动化定义的一般控件集为基础，自动测试。用户只需要描述操作，其他所需的一切都会自动生成和使用。



对于这三种类型，各类需要的技能有所区别

| 类型       | 测试用例、框架自动化技能                                     |
| ---------- | ------------------------------------------------------------ |
| 记录与回放 | 脚本语言、记录—回放工具的使用                                |
| 数据驱动   | 脚本语言、程序设计语言、数据生成技术知识、被测产品的使用     |
| 行动驱动   | 脚本语言、程序设计语言、被测试产品的设计和体系结构、框架的使用、创建框架的设计和体系结构技能、多个产品的通用测试需求 |



### 自动化测试的设计和体系结构



 1、外部模块

​	两个外部模块：测试用例数据库和缺陷库。

测试用例数据库用来存放所有的测试用例、执行测试用例的步骤以及执行历史。

缺陷库包含特定公司在各种被测产品中发现的所有缺陷的详细信息。



 2、场景与配置文件模块

​	配置文件包含一组在自动化中使用的变量。这些变量可以是针对测试框架的，也可以是针对测试自动化中的其他模块的；它们的取值可以动态改变的，以实现不同的执行、输入、输出和状态条件。



3、测试用例与测试框架模块

​	测试框架是将“要执行什么”和“如何执行”结合在一起的模块。测试框架从测试用例数据库中提取要自动化测试的特定测试用例，提取场景、提取变量及相关取值并执行测试用例。





 4、工具与结果模块

​	当测试框架执行其操作时，可能需要一组相关工具。如：IP分组模拟器、用户登录模拟器、计算机模拟器等。	结果模块用来存放测试框架执行测试用例的每个执行结果、对应的场景和变量值等，以供进一步分析和处理。注意，测试框架运行测试用例得到的结果不能覆盖以前运行测试用例的结果。





5、报告生成器与报告/指标模块

​	报告生成器是提取必要的输入并准备格式化报告的模块。一旦得到测试结果，报告生成器就可以生成相关的指标。所生成的所有报告和指标都存储在自动化的报告/指标模块中，以备日后使用和分析。



### 自动化测试的过程模型

自动化测试的过程模型有三个阶段：

自动化测试需求分析

自动化测试框架的搭建

自动化测试包的测试阶段



####  1、 自动化测试需求分析

​	当测试项目满足了自动化测试的前提条件，并确定在该项目中需要使用自动化测试时，我们便开始进行自动化测试需求分析。此过程需要确定自动化测试的范围以及相应的测试用例、测试数据，并形成详细的文档，以便于自动化测试框架的建立。



#### 2、自动化测试框架的搭建

自动化测试框架要素如下：

（1） 公用的对象：不同的测试用例会有一些相同的对象被重复使用，如窗口、按钮、页面等

（2） 公用的环境：各测试用例也会用到相同的测试环境，将该测试环境独立封装，在各个测试用例中灵活调用，也能增强脚本的可维护性。

（3） 公用的方法：当测试工具没有需要的方法时，而该方法又会被经常使用，我们便需要自己编写该方法，以方便脚本的调用。

（4） 测试数据：当一个测试用例需要执行很多个测试数据时，可将这些测试数据放在一个独立的文件中，由测试脚本执行到该用例时读取数据文件，从而达到数据覆盖的目的。



####  3、产品和自动化测试包的测试阶段

​	产品和自动化测试开发的每个阶段可以执行一组活动，包括：产品在需求阶段采集开发需求时，同时完成针对测试产品的测试需求，针对自动化开发的需求和针对自动化测试的需求。类似地，在策划和设计阶段也可以执行一组活动，包括：针对产品和自动化测试的编码构成W字模型的编码阶段，这个阶段要交付产品和测试包。W字模型如图所示。

![](https://raw.githubusercontent.com/ZanderZhao/images/master/img2019/20191114193915.png)



## 自动化测试的方案与选择

### 自动化测试的前提条件

实施自动化测试之前需要对软件开发过程进行分析，以观察其是否适合使用自动化测试。通常需要同时满足以下条件：

1、 需求变动不频繁

2、 项目周期足够长

3、 自动化测试脚本可重复使用





### 自动化测试适合的场合

适合于软件测试自动化的场合如下：

1、回归测试

2、文档的管理

3、测试报告生成

4、确定覆盖率



### 自动化测试选择原则

1、自动化测试选择相关因素

（1）项目的影响：自动化测试能否对项目进度、覆盖率、风险有积极的作用。

（2）复杂度：自动化测试能否容易实现。

（3）时间：自动化测试需要多长的时间，项目开发要有足够的测试时间。、

（4）稳定性：代码和需求的相对稳定性，代码是否长期保持相对稳定，功能特性变化速度是否快等。

（5）资源：是否有足够的人力资源、物力资源来测试运行。

（6）覆盖率：自动化测试能否覆盖程序的关键特性和功能。

（7）自动执行：负责执行的测试人员是否有足够的技能与时间运行测试。

2、自动化测试选择的建议

（1）选择尽可能少的自动化产品覆盖尽可能多的平台，以降低产品投资和团队的学习成本。

（2）测试流程管理自动化通常应该优先考虑，以满足为企业测试团队提供流程管理支持的需求。

（3）在投资有限的情况下，性能测试自动化产品将优先于功能测试自动化被考虑。

（4）在考虑产品性价比的同时，应充分关注产品的支持服务和售后服务的完善性。

（5）尽量选择趋于主流的产品，以便通过行业间交流甚至网络等方式获得更为广泛的经验和支持。

（6）应对测试自动化方案的可扩展性提出要求，以满足企业不断发展的技术和业务需求。







## 自动化测试的工具与选择

### 自动化测试工具分类

1、白盒测试工具	

白盒测试工具多为一个套件，其中包括了动态错误检测、时间性能分析和覆盖率统计等多个工具。	常见的静态测试工具有：Telelogic公司的Logiscope、PR公司的PRQA；动态测试工具有：Compuware公司的DevPartner、IBM Rational公司的PurifyPlus 等。



2、黑盒测试工具

​	一般利用脚本的录制和回放模拟用户操作，将被测试系统的输出结果记录下来，同预先给定的输出值进行比较，分析得出测试结果。并可以在测试脚本加以修改。多用于确认阶段及其对应的回归测试中，其测试对象多为拥有图形用户界面的应用程序。

​	常见的黑盒测试工具有：IBM Rational公司的Team Test Tobot和Compuware公司的QACenter、HP-Mercury公司的WinRunner和QTP（QuickTest Professional）等。



3、网络测试工具

​	网络测试工具主要包括网络故障的定位、网络性监测工具、网络模拟仿真工具等，分析分布式应用性能，关注应用、网络与其他元素内部的交互式活动，以便使网络管理员了解网络不同位置和不同活动之间应用的行为。	常见的网络测试工具有：Network Associate提供的Network Sniffer、HP-Mercury公司的LoadRunner等。





 4、专用代码测试工具

​	专门支持某类语言的测试工具。

​	常见的有:BoundsCheck用于VC++代码的自动侦错和调试工具，CodeReview是VB代码分析工具，Jcheck是用来分析Java语言的执行过程并进行图形化的工具。还有Java环境下的单元测试工具Junit和C++环境下的单元测试工具CppUnit等。





5、错误捕获工具

​	错误捕获工具是用来捕获软件错误后进行程序调试的工具。可以由开发人员自行编写，还可以使用集成开发环境中自带的这种工具功能，也可以购买专业的调试软件。

​	常见的有：Compuware NuMega推出的一系列软件等。



6、测试管理工具

​	测试管理工具是对测试需求、测试计划、测试用例、测试实施、测试报告等活动和相应制品进行管理的一类工具。

​	常见的管理工具有：Mercury Interactive公司的TestDirector、IBM公司TestManager和Compuware公司的TrackRecord、HP-Mercury公司的Quality Center等。







### 自动化测试工具的选择

1、选择测试工具的准则

（1）满足需求（2）技术预期（3）培训与技能（4）管理问题

2、工具选择与部署步骤

（1）在所讨论过的一般需求中提取测试包需求，补充其他需求。（2）保证已经考虑过前面所讨论的经验。（3）收集其他公司使用类似工具的经验。（4）准备向提供商提出的有关成本、工作量和支持问题的检查单。（5）列出满足以上需求的工具（优先列出提供源代码的工具）。（6）评价并最后确定一个或一组工具，并对所有测试开发人员提供工具培训。（7）培训工具的所有潜在用户后，为各个测试团队部署该工具。

 3、注意事项

（1）各方面因素综合考虑（2）自动化测试不能完全替代手工测试（3）分析投入回报问题











